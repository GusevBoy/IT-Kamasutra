(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(e,t,n){e.exports={wrapper:"Users_wrapper__3zs-t",inner:"Users_inner__2EpQS",itemWrapper:"Users_itemWrapper__3cpnH",icon:"Users_icon__1XG3Y",item:"Users_item__2_u8d",info:"Users_info__W1JxX",name:"Users_name__3Kys8",text:"Users_text__1xfj3",paginationWrap:"Users_paginationWrap__2aVi6"}},17:function(e,t,n){e.exports={profileComponent:"Profile_profileComponent__1lJLL",inner:"Profile_inner__3cfjG",itemWrapper:"Profile_itemWrapper__yuwlG",icon:"Profile_icon__2kxj5",item:"Profile_item__Kyaaw",info:"Profile_info__2NpoZ",text:"Profile_text__3RWJW",name:"Profile_name__2Psdw",networksWrap:"Profile_networksWrap__q6RCC"}},19:function(e,t,n){e.exports={navigation:"Navigation_navigation__1VtLy",item:"Navigation_item__2T5qw",active:"Navigation_active__1Sofg",item_last:"Navigation_item_last__3tTMq"}},20:function(e,t,n){e.exports={header:"MyPosts_header__1h0Dg",wrapper:"MyPosts_wrapper__3Wdzl",image:"MyPosts_image__2TKPF",modalOpen:"MyPosts_modalOpen__MgL6p",modalClose:"MyPosts_modalClose__3wPm0",modalWrapper:"MyPosts_modalWrapper__3y2MV",wrapperPosts:"MyPosts_wrapperPosts__2kWh1",buttons:"MyPosts_buttons__1eeLq",buttonRight:"MyPosts_buttonRight__10Pe4"}},21:function(e,t,n){e.exports={header:"Header_header__1VCKf",image:"Header_image__1zcEI",texts:"Header_texts__1Szg5",text:"Header_text__G3J9D",name:"Header_name__2-9cn"}},22:function(e,t,n){e.exports={dialogsWrap:"Dialogs_dialogsWrap__eSVO3",wrapperCollocutors:"Dialogs_wrapperCollocutors__-j3uS",modalInner:"Dialogs_modalInner__RhA1S",modalOpen:"Dialogs_modalOpen__3MOps",modalClose:"Dialogs_modalClose__1QNz0",sendField:"Dialogs_sendField__GVO00"}},23:function(e,t,n){e.exports={itemStyle:"Pagination_itemStyle__2_9K3",itemActive:"Pagination_itemActive__gzdQ-",itemLast:"Pagination_itemLast__fGkUk",wrapper:"Pagination_wrapper__1MyGX",dots:"Pagination_dots__1FtzW"}},27:function(e,t,n){e.exports={collocutors:"Collocutors_collocutors__1IV5Y",item:"Collocutors_item__2A237",activeLink:"Collocutors_activeLink__2orp7",icon:"Collocutors_icon__2-hwz",iconActive:"Collocutors_iconActive__2bVcU"}},33:function(e,t,n){e.exports={button:"Button_button__3QF_k",buttonText:"Button_buttonText__rFPD_"}},35:function(e,t,n){e.exports={image:"Networks_image__2lUyu",imageLast:"Networks_imageLast__2IPM0",wrapper:"Networks_wrapper__3Y1UL"}},39:function(e,t,n){e.exports={input:"Input_input__3PNbO",inputSmall:"Input_inputSmall__1H-yC"}},40:function(e,t,n){e.exports={status:"Status_status__2Q1Dm",inputWrap:"Status_inputWrap__5_gvR"}},43:function(e,t,n){e.exports={post:"Post_post__3iLUm",icon:"Post_icon__3PMlS"}},44:function(e,t,n){e.exports={wrapper:"ChatCloud_wrapper__9FZ0k",activeWrapper:"ChatCloud_activeWrapper__3aDJc"}},55:function(e,t,n){e.exports={label:"Label_label__2bY5z"}},56:function(e,t,n){e.exports={textarea:"TextArea_textarea__3TM_4"}},57:function(e,t,n){e.exports={text0:"Text_text0__1Agac"}},58:function(e,t,n){e.exports={loader:"Loader_loader__1j2Bs",load8:"Loader_load8__2pLw8"}},59:function(e,t,n){e.exports={link:"Login_link__23cFE"}},60:function(e,t,n){e.exports={content:"Content_content__3FZEj"}},63:function(e,t,n){},68:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);n(63);var s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),i(e),a(e),o(e)}))},i=n(1),a=n.n(i),o=n(31),r=n.n(o),c=(n(68),n(13)),l=n(14),u=n(16),d=n(15),p=n(38),j=n.n(p),m=n(53),g=n(2),b="SET-AUTH-USER",h="SET-IS-LOADING",f={userId:"",login:"",email:"",photos:"",contacts:"",isAuth:!1,isLoading:!0},_=function(e,t,n,s,i){return{type:b,data:{userId:e,login:t,email:n,photos:s,contacts:i}}},O=function(e){return{type:h,isLoading:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(g.a)(Object(g.a)(Object(g.a)({},e),t.data),{},{isAuth:!0});case h:return Object(g.a)(Object(g.a)({},e),{},{isLoading:t.isLoading});default:return e}},v=n(54).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"2df6f7cb-82d2-4d4e-85ca-59655ee071ec"}}),w={getAuthMe:function(){return v.get("auth/me")}},P={getProfile:function(e){return v.get("/profile/".concat(e))}},y=function(){return function(e){(function(){var t=Object(m.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O(!0)),t.next=3,w.getAuthMe().then((function(t){var n=t.data.data,s=n.email,i=n.id,a=n.login;if(i)return P.getProfile(i).then((function(t){var n=t.data,o=n.photos,r=n.contacts;e(_(i,a,s,o,r))}))})).finally((function(){return e(O(!1))}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},C=n(5),N=n(21),k=n.p+"static/media/akatsuki.7880f12b.svg",S=n(18),T=n(39),M=n(0),D=function(e){var t=e.onChange,n=e.placeholder,s=e.value,i=e.defaultValue,a=e.type,o=void 0===a?"default":a,r=e.autoFocus,c=e.onBlur,l={default:T.input,small:T.inputSmall};return Object(M.jsx)("input",{className:l[o],placeholder:n,onChange:function(e){var n=e.currentTarget.value;t&&t(n)},autoFocus:r,value:s,defaultValue:i,onBlur:c})},L=n(40),F=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={editMode:!1},s.doubleClick=s.doubleClick.bind(Object(S.a)(s)),s.onBlur=s.onBlur.bind(Object(S.a)(s)),s}return Object(l.a)(n,[{key:"doubleClick",value:function(){this.setState({editMode:!0})}},{key:"onBlur",value:function(e){console.log("onBlur",e.currentTarget.value),this.setState({editMode:!1})}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.state.editMode;return console.log("editMode",this.state.editMode),n?Object(M.jsx)("div",{className:L.inputWrap,children:Object(M.jsx)(D,{type:"small",defaultValue:t,autoFocus:!0,onBlur:function(t){return e.onBlur(t)}})}):Object(M.jsx)("button",{onDoubleClick:function(){return e.doubleClick()},className:L.status,children:t})}}]),n}(a.a.Component),U=function(e){var t=e.login,n=e.email;return Object(M.jsxs)("header",{className:N.header,children:[Object(M.jsx)("img",{className:N.image,src:k,alt:"logotip"}),Object(M.jsxs)("div",{className:N.texts,children:[Object(M.jsx)("span",{className:"".concat(N.text," ").concat(N.name),children:t}),Object(M.jsx)("span",{className:N.text,children:n}),Object(M.jsx)(F,{children:"777"})]})]})},A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthProfile()}},{key:"render",value:function(){var e=this.props,t=e.login,n=e.email;return Object(M.jsx)(U,{login:t,email:n})}}]),n}(a.a.Component),W=Object(C.b)((function(e){return{userId:e.auth.userId,login:e.auth.login,email:e.auth.email,isAuth:e.auth.isAuth}}),{getAuthProfile:y})(A),I=n(19),E=n(10),z=function(){return Object(M.jsxs)("nav",{className:I.navigation,children:[Object(M.jsx)("div",{className:I.item,children:Object(M.jsx)(E.b,{to:"/posts",activeClassName:I.active,children:"Posts"})}),Object(M.jsx)("div",{className:I.item,children:Object(M.jsx)(E.b,{to:"/messages",activeClassName:I.active,children:"Messages"})}),Object(M.jsx)("div",{className:I.item,children:Object(M.jsx)(E.b,{to:"/users",activeClassName:I.active,children:"Users"})})]})},G=n(17),B=n.p+"static/media/facebook.a16a3fcb.svg",H=n.p+"static/media/github.d04334d7.svg",R=n.p+"static/media/instagram.9031093c.svg",V=n.p+"static/media/twitter.292d549b.svg",J=n.p+"static/media/vk.70eeac66.svg",K=n.p+"static/media/youtube.99b22cee.svg",Y=n(35),q=function(e){var t=e.links,n=void 0===t?{}:t,s=e.profileName,i={facebook:B,github:H,instagram:R,twitter:V,vk:J,youtube:K};return Object(M.jsx)("div",{className:Y.wrapper,children:Object.keys(n).map((function(e,t){return(null===i||void 0===i?void 0:i[e])&&(null===n||void 0===n?void 0:n[e])&&Object(M.jsx)("a",{href:"https://".concat(n[e].replace("https://","")||""),alt:"link to ".concat(e||""," for user ").concat(s||""),target:"blank",children:Object(M.jsx)("img",{src:i[e],className:"".concat(Y.image," ").concat(0===t&&Y.imageLast)})})}))})},Q=n(33),X=function(e){var t=e.onClick,n=e.children,s=e.label;return Object(M.jsx)("button",{className:Q.buttonText,"aria-label":s,onClick:function(e){t&&t(e)},children:n})},Z="https://www.kindpng.com/picc/m/67-676296_straw-hat-luffy-clipart-one-piece-icon-png.png",$=function(e){var t,n,s=e.profile;return Object(M.jsx)("div",{children:Object(M.jsxs)("div",{className:G.itemWrapper,children:[Object(M.jsx)("img",{width:"40px",height:"40px",className:G.icon,src:(null===s||void 0===s||null===(t=s.photos)||void 0===t?void 0:t.large)||(null===s||void 0===s||null===(n=s.photos)||void 0===n?void 0:n.small)||Z,alt:s.fullName}),Object(M.jsx)("div",{className:G.item,children:Object(M.jsxs)("div",{className:G.info,children:[Object(M.jsx)("span",{className:"".concat(G.text," ").concat(G.name),children:s.fullName}),Object(M.jsx)("span",{className:G.text,children:s.aboutMe}),Object(M.jsx)("span",{className:G.text,children:s.lookingForAJobDescription}),Object(M.jsx)("div",{className:G.networksWrap,children:Object(M.jsx)(q,{links:s.contacts})})]})})]})})},ee=n(25),te=n(62),ne="ADD-POST",se="ADD-FIELD-POST",ie={posts:[{title:"How to catch Naruto?"},{title:"Orochimaru snakes"},{title:"Hidan's immortality"},{title:"Destruction of Konoha"},{title:"Captured jinch\u016briki"}],newPostTitle:"",newPostDescription:""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(g.a)(Object(g.a)({},e),{},{posts:[].concat(Object(te.a)(e.posts),[{id:e.posts.length+1,title:e.newPostTitle,description:e.newPostDescription}]),newPostTitle:"",newPostDescription:""});case se:return Object(g.a)(Object(g.a)({},e),{},Object(ee.a)({},t.field,t.text));default:return e}},oe=n(30),re=n(20),ce=n(43),le=n.p+"static/media/akatsuki.7880f12b.svg",ue=function(e){e.src;var t=e.alt,n=e.children;return Object(M.jsxs)("div",{className:ce.post,children:[Object(M.jsx)("img",{className:ce.icon,src:le,alt:t}),Object(M.jsx)("p",{children:n})]})},de=function(e){var t=e.onClick,n=e.children,s=e.label;return Object(M.jsx)("button",{className:Q.button,"aria-label":s,onClick:function(e){t&&t(e)},children:n})},pe=n(55),je=function(e){var t=e.children;return Object(M.jsx)("label",{className:pe.label,children:t})},me=n(56),ge=function(e){var t=e.onChange,n=e.placeholder,s=e.value;return Object(M.jsx)("textarea",{className:me.textarea,placeholder:n,onChange:function(e){var n=e.currentTarget.value;t&&t(n)},value:s})},be=n(57),he=function(e){var t=e.children;return Object(M.jsx)("p",{className:be.text0,children:t})},fe=function(e){var t=e.posts,n=e.newPostTitle,s=e.newPostDescription,a=e.updateNewPostTitle,o=e.updateNewPostDescription,r=e.addPost,c=Object(i.useState)(!1),l=Object(oe.a)(c,2),u=l[0],d=l[1];return Object(M.jsxs)("div",{className:re.wrapper,children:[Object(M.jsxs)("div",{className:re.wrapperPosts,children:[u?Object(M.jsxs)("div",{className:re.buttons,children:[Object(M.jsx)(de,{onClick:function(){return d(!u)},children:"Close"}),Object(M.jsx)("div",{className:re.buttonRight,children:Object(M.jsx)(de,{onClick:function(){r(),d(!u)},children:"Save"})})]}):Object(M.jsx)(de,{onClick:function(){return d(!u)},children:"Added post"}),t.map((function(e,t){return Object(M.jsx)(ue,{alt:"icon-".concat(t,". ").concat(e.title),children:e.title})}))]}),Object(M.jsx)("div",{className:"".concat(u?re.modalOpen:re.modalClose," ").concat(re.modalWrapper),children:Object(M.jsxs)("div",{children:[Object(M.jsxs)(je,{children:[Object(M.jsx)(he,{children:"Title"}),Object(M.jsx)(D,{value:n,onChange:function(e){return a(e)}})]}),Object(M.jsxs)(je,{children:[Object(M.jsx)(he,{children:"Description"}),Object(M.jsx)(ge,{value:s,onChange:function(e){return o(e)}})]})]})})]})},_e=Object(C.b)((function(e){return{posts:e.myPosts.posts,newPostTitle:e.myPosts.newPostTitle,newPostDescription:e.myPosts.newPostDescription}}),(function(e){return{updateNewPostTitle:function(t){return e({type:se,field:"newPostTitle",text:t})},updateNewPostDescription:function(t){return e({type:se,field:"newPostDescription",text:t})},addPost:function(){return e({type:ne})}}}))(fe),Oe="ADD-MESSAGE",xe="ADD-FIELD-MESSAGE",ve={dialogs:[{id:"222-333",idSender:"6dd-3-d-3",messages:[{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"Hi"},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"You must find second Jinchurike"},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"ok, we started hounting",myMessage:!0},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"good"}]},{id:"222-322",idSender:"4pp-a-q-3",messages:[{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"Boom!"},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"Yee, bro, boom, boom ))",myMessage:!0}]}],newSendMessage:""},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:var n=Object(g.a)({},e),s=n.dialogs.findIndex((function(e){return e.idSender===t.idSender}));return n.dialogs[s].messages.push({time:new Date,message:n.newSendMessage,myMessage:!0}),n.newSendMessage="",n;case xe:return Object(g.a)(Object(g.a)({},e),{},Object(ee.a)({},t.field,t.text));default:return e}},Pe=n(22),ye=n(27),Ce={_state:{userId:"6dd-3-d-3",users:[{img:"https://sketchok.com/images/articles/06-anime/023-naruto/17/11.jpg",login:"Itachi",id:"1ac-i-v-2"},{img:"https://www.pngitem.com/pimgs/m/533-5331003_render-naruto-pain-naruto-pain-face-png-transparent.png",login:"Pain",id:"2as-f-g-4"},{img:"https://i.pinimg.com/originals/d8/47/fd/d847fd7264cf58b2dcce68fb207ddd30.jpg",login:"Conan",id:"3df-f-o-3"},{img:"https://cdn141.picsart.com/320176969123201.jpg?type=webp&to=min&r=640",login:"Deidara",id:"4pp-a-q-3"},{img:"https://i.pinimg.com/originals/49/79/34/497934ae5effa963835929a842a2c792.jpg",login:"Hidan",id:"5vf-4-4-2"},{img:"https://pbs.twimg.com/media/DaAn01QWkAAeDou?format=jpg&name=small",login:"Orachimaru",id:"6dd-3-d-3"}],myPosts:{posts:[{title:"How to catch Naruto?"},{title:"Orochimaru snakes"},{title:"Hidan's immortality"},{title:"Destruction of Konoha"},{title:"Captured jinch\u016briki"}],newPostTitle:"",newPostDescription:""},myDialogs:{dialogs:[{id:"222-333",idSender:"6dd-3-d-3",messages:[{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"Hi"},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"You must find second Jinchurike"},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"ok, we started hounting",myMessage:!0},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"good"}]},{id:"222-322",idSender:"4pp-a-q-3",messages:[{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"Boom!"},{time:"2021-02-25T18:25+03 2021-01-25T18:25+03:00",message:"Yee, bro, boom, boom ))",myMessage:!0}]}],newSendMessage:""}},_callSubscriber:function(){console.error("state changed")},subscribe:function(e){this._callSubscriber=e},getState:function(){return this._state},dispatch:function(e){this._state.myPosts=ae(this._state.myPosts,e),this._state.myDialogs=we(this._state.myDialogs,e),this._callSubscriber(this._state)}},Ne=function(e){var t=e.dialogs,n=e.onClickLink,s=e.activeId;return Object(M.jsx)("div",{className:ye.collocutors,children:t.map((function(e){var t=Ce._state.users.find((function(t){var n=t.id;return e.idSender===n}));return Object(M.jsxs)("div",{className:ye.item,children:[Object(M.jsx)("img",{width:"35px",height:"35psx",className:"".concat(ye.icon," ").concat(s===t.id&&ye.iconActive),src:t.img,alt:t.login}),Object(M.jsx)(E.b,{onClick:function(){return n(e)},to:"/messages/".concat(t.id),className:s===t.id&&ye.activeLink,children:t.login})]},e.id)}))})},ke=n(44),Se=function(e){var t=e.children,n=e.active;return Object(M.jsx)("div",{className:"".concat(n&&ke.activeWrapper," ").concat(ke.wrapper," "),children:t})},Te=function(e){var t=e.dialogs,n=e.users,s=e.newSendMessage,a=e.addMessage,o=e.updateNewMessage,r=Object(i.useState)(null),c=Object(oe.a)(r,2),l=c[0],u=c[1],d=Object(i.useState)(null),p=Object(oe.a)(d,2),j=p[0],m=p[1];return Object(M.jsxs)("div",{className:Pe.dialogsWrap,children:[Object(M.jsx)("div",{className:Pe.wrapperCollocutors,children:Object(M.jsx)(Ne,{users:n,dialogs:t,onClickLink:function(e){var t=e.idSender,n=e.messages;u(t),m(n)},activeId:l})}),Object(M.jsxs)("div",{className:j?Pe.modalOpen:Pe.modalClose,children:[Object(M.jsx)("div",{className:Pe.modalInner,children:j&&j.map((function(e){var t=e.message;return e.myMessage?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{}),Object(M.jsx)(Se,{active:!0,children:t})]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Se,{children:t}),Object(M.jsx)("div",{})]})}))}),Object(M.jsxs)("div",{className:Pe.sendField,children:[Object(M.jsx)(ge,{value:s,onChange:function(e){return o(e)}}),Object(M.jsx)(de,{onClick:function(){return a(l)},children:"Send"})]})]})]})},Me=n(4),De=n(58);var Le=function(){return Object(M.jsx)("div",{className:De.loader,children:"Loading..."})},Fe=function(e){return{isAuth:e.auth.isAuth,isLoading:e.auth.isLoading}},Ue=function(e){return Object(C.b)(Fe)((function(t){return console.log("props.isLoading",t.isLoading),t.isLoading?Object(M.jsx)(Le,{}):t.isAuth?Object(M.jsx)(e,Object(g.a)({},t)):Object(M.jsx)(Me.a,{to:"/login"})}))},Ae=n(26),We=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(M.jsx)(Te,Object(g.a)({},this.props))}}]),n}(a.a.Component),Ie=Object(Ae.c)(Object(C.b)((function(e){return{dialogs:e.myDialogs.dialogs,newSendMessage:e.myDialogs.newSendMessage,users:e.myUsers.users}}),(function(e){return{addMessage:function(t){e({type:Oe,idSender:t})},updateNewMessage:function(t){e({type:xe,field:"newSendMessage",text:t})}}})),Ue)(We),Ee="SET-FOLLOW",ze="SET-USERS",Ge="SET-CURRENT-PAGE",Be="SET-TOTAL-COUNT",He="TOGGLE-IS-FETCHING",Re="TOGGLE-FOLLOWING-PROGRESS",Ve={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingProgress:!1},Je=function(e){return{type:He,isFetching:e}},Ke=function(e){return{type:Re,isProgress:e}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(g.a)(Object(g.a)({},e),{},{followed:t.followed}):Object(g.a)({},e)}))});case ze:return Object(g.a)(Object(g.a)({},e),{},{users:t.users});case Ge:return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.currentPage});case Be:return Object(g.a)(Object(g.a)({},e),{},{totalUsersCount:t.totalUsersCount});case He:case He:return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case Re:return Object(g.a)(Object(g.a)({},e),{},{followingProgress:t.isProgress});default:return e}},qe={getUsers:function(e,t){return v.get("users?page=".concat(e,"&count=").concat(t))}},Qe=function(e,t){return function(n){qe.getUsers(e,t).then((function(e){var t,s,i=e.data;i.items.length&&(n(Je(!0)),n((s=i.items,{type:ze,users:s})),n((t=i.totalCount,{type:Be,totalUsersCount:t})),n(Je(!1)))}))}},Xe={follow:function(e){return v.post("/follow/".concat(e))},unfollow:function(e){return v.delete("/follow/".concat(e))}},Ze=function(e,t){return function(n){n(Ke(!0)),e?Xe.follow(t).then((function(){n({type:Ee,id:t,followed:!0})})).finally((function(){return n(Ke(!1))})):Xe.unfollow(t).then((function(){n({type:Ee,id:t,followed:!1})})).finally((function(){return n(Ke(!1))}))}},$e=n(12),et=n(23),tt=function(e){for(var t=e.totalUsersCount,n=e.pageSize,s=e.currentPage,i=e.onClick,a=Math.ceil(t/n),o=Math.round(a/3),r=Math.round(2*o),c=[],l=1;l<=a;l++)c.push(l);s<5?c=c.slice(0,6):s>=a-4?c=c.slice(a-6,a):s<o?c=c.slice(s-5,s+1):s>=o&&s<r?c=c.slice(s-3,s+2):s>=r&&(c=c.slice(s-2,s+4));var u=function(e,t){return Object(M.jsx)("span",{onClick:function(e){return i(Number(e.currentTarget.innerText))},className:"".concat(et.itemStyle," ").concat(e===s&&et.itemActive," ").concat(t&&et.itemLast),children:e})};return Boolean(c.length)&&Object(M.jsxs)("div",{className:et.wrapper,children:[s>=o&&Object(M.jsxs)(M.Fragment,{children:[u(1),Object(M.jsx)("span",{className:et.dots,children:"..."})]}),c.map((function(e,t){return u(e,t===c.length-1)})),s<r&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("span",{className:et.dots,children:"..."}),u(a)]})]})},nt=function(e){var t=e.users,n=e.onClickFollow,s=e.totalUsersCount,i=e.pageSize,a=e.currentPage,o=e.onPageChanged,r=e.isFetching,c=e.followingProgress;return Object(M.jsx)("div",{className:$e.wrapper,children:Object(M.jsxs)("div",{className:$e.inner,children:[Object(M.jsx)("div",{className:$e.paginationWrap,children:Object(M.jsx)(tt,{totalUsersCount:s,pageSize:i,currentPage:a,onClick:o})}),r?Object(M.jsx)(Le,{}):t.map((function(e){var t,s;return Object(M.jsxs)("div",{className:$e.itemWrapper,children:[Object(M.jsx)("div",{children:Object(M.jsx)(E.b,{to:"/profile/".concat(e.id),children:Object(M.jsx)("img",{width:"40px",height:"40px",className:$e.icon,src:(null===e||void 0===e||null===(t=e.photos)||void 0===t?void 0:t.large)||(null===e||void 0===e||null===(s=e.photos)||void 0===s?void 0:s.small)||Z,alt:e.name})})}),Object(M.jsxs)("div",{className:$e.item,children:[Object(M.jsxs)("div",{className:$e.info,children:[Object(M.jsx)("span",{className:"".concat($e.name," ").concat($e.text),children:e.name}),Object(M.jsx)("span",{className:$e.text,children:e.status})]}),Object(M.jsx)(X,{onClick:function(){return!c&&n(!e.followed,e.id)},children:e.followed?"unfollow":"follow"})]})]})}))]})})},st=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).onPageChanged=s.onPageChanged.bind(Object(S.a)(s)),s.onClickFollow=s.onClickFollow.bind(Object(S.a)(s)),s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsers(t,n)}},{key:"onPageChanged",value:function(e){this.props.setCurrentPage(e),this.props.getUsers(e,this.props.pageSize)}},{key:"onClickFollow",value:function(e,t){this.props.toggleFollowing(e,t)}},{key:"render",value:function(){var e=this.props,t=e.users,n=e.totalUsersCount,s=e.pageSize,i=e.currentPage,a=e.isFetching,o=e.followingProgress;return Object(M.jsx)(nt,{users:t,onClickFollow:this.onClickFollow,totalUsersCount:n,pageSize:s,currentPage:i,onPageChanged:this.onPageChanged,isFetching:a,followingProgress:o})}}]),n}(a.a.Component),it=Ue(Object(C.b)((function(e){return{users:e.myUsers.users,totalUsersCount:e.myUsers.totalUsersCount,pageSize:e.myUsers.pageSize,currentPage:e.myUsers.currentPage,isFetching:e.myUsers.isFetching,followingProgress:e.myUsers.followingProgress}}),{setCurrentPage:function(e){return{type:Ge,currentPage:e}},getUsers:Qe,toggleFollowing:Ze})(st)),at="SET-PROFILE",ot={profile:{}},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});default:return e}},ct=function(e){return function(t){P.getProfile(e).then((function(e){var n=e.data;n&&t({type:at,profile:n})}))}},lt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getProfile(this.props.match.params.profileId)}},{key:"render",value:function(){var e=this.props,t=e.profile;e.setProfile;return Object(M.jsx)($,{profile:t})}}]),n}(a.a.Component),ut=Object(C.b)((function(e){return{profile:e.myProfile.profile}}),{getProfile:ct})(Object(Me.f)(lt)),dt=n(59),pt=function(){return Object(M.jsx)("a",{href:"https://social-network.samuraijs.com/login",className:dt.link,children:Object(M.jsx)(de,{children:"LOGIN"})})},jt=n(60),mt=function(){return Object(M.jsxs)("div",{className:jt.content,children:[Object(M.jsx)(Me.b,{path:"/posts",render:function(){return Object(M.jsx)(_e,{})}}),Object(M.jsx)(Me.b,{path:"/messages",render:function(){return Object(M.jsx)(Ie,{})}}),Object(M.jsx)(Me.b,{path:"/users",render:function(){return Object(M.jsx)(it,{})}}),Object(M.jsx)(Me.b,{path:"/profile/:profileId",render:function(){return Object(M.jsx)(ut,{})}}),Object(M.jsx)(Me.b,{path:"/login",render:function(){return Object(M.jsx)(pt,{})}})]})},gt=function(){return Object(M.jsx)(E.a,{basename:"/IT-Kamasutra",children:Object(M.jsxs)("div",{className:"app-wrapper",children:[Object(M.jsx)(W,{}),Object(M.jsx)(z,{}),Object(M.jsx)(mt,{})]})})},bt=n(61),ht=Object(Ae.b)({myPosts:ae,myDialogs:we,myUsers:Ye,myProfile:rt,auth:x}),ft=Object(Ae.d)(ht,Object(Ae.a)(bt.a)),_t=function(){r.a.render(Object(M.jsx)(i.StrictMode,{children:Object(M.jsx)(C.a,{store:ft,children:Object(M.jsx)(gt,{})})}),document.getElementById("root"))};_t(),ft.subscribe((function(){return _t()})),s()}},[[94,1,2]]]);
//# sourceMappingURL=main.2d8259db.chunk.js.map